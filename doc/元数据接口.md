# 元数据相关接口

**目录**

## [名词解释](#x1)

## [元数据标准](#tt1)

### [1.创建数据标准分类](#t1)

### [2.删除数据标准分类](#t2)

### [3.编辑数据标准分类](#t3)

### [4.查询数据标准树](#t4)

## [元数据](#tt2)
### [5.查询数据标准所包含记录](#t5)

### [6.增加元数据属性字段](#t6)

### [7.删除元数据](#t7)

### [8.编辑元数据属性字段](#t8)


## [词汇表](#tt3)

### [9.创建词汇表类型](#t9)

### [10.查询指定词汇表类型](#t10)

### [11.查询所有词汇表类型](#t11)

### [12.修改词汇表类型](#t12)

### [13.删除词汇表类型](#t13)

## [编码表](#tt4)

### [14.创建编码表](#t14)

### [15.查询编码表](#t15)

### [16.编辑编码表](#t16)

### [17.删除编码表](#t17)

## <a name='x1'>名词解释</a>
* `元数据标准`:惺惺惜惺惺
* `元数据`:想嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻
* `结构类型`:xxxxxxxxxxxxxxxxx
* `词汇表`:xxxxxxxxxxxxxxxxx
* `编码表`:xxxxxxxxxxxxxx


## <a name='tt1'>元数据标准</a>

### <a name='t1'>1.创建数据标准类别</a>
#### 1.1. 请求参数:

* `name`:数据标准名称,必须
* `description`:标准描述,请求必须
* `prarent_id`:父节点,如果为-1则表示为根节点 //此处修改为-1为根节点

#### 1.2. 返回json格式:

```json
{
    success:true,
    msg:"如果success为false时返回错误信息"
}
```
### <a name='t2'>2. 删除数据标准类别</a>
#### 2.1.请求参数:
* `id`:标准类别id,必须

#### 2.2.返回json格式:

```json
{
    success:true,
    msg:"如果success为false时返回错误信息"
}
```

### <a name='t3'>3. 编辑数据标准类别</a>
#### 3.1.请求参数:
* `id`:标准类别id,必须
* `name`:数据标准名称,此参数如为空,表示保持原有值,非必须
* `description`:标准描述,此参数如为空,表示保持原有值,非必须
* `parent_id`:父节点,如果为-1则表示为根,此参数如为空,表示保持原有值,非必须

#### 3.2.返回json格式:

```json
{
    success:true,
    msg:"如果为success为false时返回错误信息"
}
```

### <a name='t4'>4. 查询数据标准树（只查下一级，被哪个资源库引用）</a>
#### 4.1.请求参数:

* `id`:本节点id,如果为-1则表示为根,必须

#### 4.2.返回json格式://返回parent_id=id的节点信息

```json
[
  {
    "id": 1,
    "name": "国家标准",
    "parent_id": "",
	}
]
```
## <a name='tt2'>元数据</a>
### <a name='t5'>5. 查询数据标准所包含元数据记录</a>
#### 5.1. 请求参数

* `parent_id`:父节点id,必须
* `querycondition`:查询条件。 name表示按名称模糊查询,code表示按编码模糊查询,非必须
* `value`:用户输入值,非必须
* `sort`:排序的字段名,非必须
* `order`:排序的顺序(desc,asc),非必须
* `page`:分页的页数,非必须
* `rows`:每页的数据量,非必须

#### 5.2. 返回json格式
##### 5.2.1. 数据类型`kind`说明
* `0`:多语言字符串
* `1`:数值
* `2`:词汇表
* `3`:结构类型
* `4`:时间


##### 5.2.2.  `constraints`赋值约束说明（需要添加一个属性字段，该字段为针对元数据输入时的约束）

* `numberrange`:范围;格式:m,n;表示从m开始到n;数字m代表整数位数,n代表小数位数
* `daterange`:时间格式:日期m为开始日期,n为结束日期,日期格式:yyyy-MM-dd
* `nullable`:是否是必备元素
* `unique`:是否是唯一元素
* `length`:字符长度

##### 5.2.3. 返回json例子

```json
{
  "total": 28, //总记录数
  "rows": [
    {
      "id": "1",
      "zh_name": "发布日期",
      "en_name": "createDate",
      "description": "字段描述",
      "domain":"ISO8601:2000中所规定的任意的日期表示方式。",
      "val_num": 10,
      "is_sorted":"",
      "example":"2001-12-31",
      "lom_id": "1.1",
      "collection":0,
      "kind": "4",
      "parent_id":""
      ]
    },
}
```

### <a name='t6'>6. 增加元数据</a>
#### 6.1. 请求参数:
* `zh_name`:中文名称,必须
* `en_enName`:英文名称,非必须
* `description`:解释,非必须
* `kind`:数据类型,必须
* `domain`:取值范围,必须 
* `val_num`:取值数，必须
* `is_sorted`:顺序,必须
* `example`:举例,必须
* `lom_id`:lom编号,非必须
* `collection`:
* `parent_id`:

#### 6.2. 返回参数:

```json
{
    success:true,
    msg:"如果为success为false时返回错误信息"
}
```

### <a name='t7'>7. 删除元数据</a>
#### 7.1.请求参数:
* `id`:字段id,必须

#### 7.2.返回json格式:

```json
{
    success:true,
    msg:"如果为success为false时返回错误信息"
}
```

### <a name='t8'>8. 编辑元数据属性字段</a>
#### 8.1. 请求参数:
* `id`:字段id,必须
* `zh_name`:中文名称,如果没有传的话,表示保持原有值,非必须
* `en_enName`:英文名称,如果没有传的话,表示保持原有值,非必须
* `description`:解释,如果没有传的话,表示保持原有值,非必须
* `kind`:数据类型,如果没有传的话,表示保持原有值,非必须
* `domain`:取值范围,如果没有传的话,表示保持原有值,非必须 
* `val_num`:取值数,如果没有传的话,表示保持原有值,非必须
* `is_sorted`:顺序,如果没有传的话,表示保持原有值,非必须
* `example`:举例,如果没有传的话,表示保持原有值,非必须
* `lom_id`:lom编号,如果没有传的话,表示保持原有值,非必须
* `collection`:
* `parent_id`:

#### 8.2. 返回参数:

```json
{
    success:true,
    msg:"如果为success为false时返回错误信息"
}
```

## <a name="tt3">词汇表</a>
### <a name="t9">9.创建词汇表类型</a>
#### 9.1.请求参数
* `zh_name`:中文名称
* `en_name`:英文名称
* `lom_id`:lom编号
* `source`:词汇表引来源
* `words`:词汇表列表


#### 9.2.返回json格式

```json
 {   success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```
### <a name="t10">10.查询指定的词汇表</a>
#### 10.1 请求参数
* `id`:词汇表ID

#### 10.2 返回json格式

```json
{
	"zh_name":"中文名称",
	"en_name":"中文名称",
	"lom_id":"1.2",
	"source":"教育部教育规范",
	"words":[
		{
			"id":1,
			"name":"教学视频"
		},
		{
			"id":2,
			"name":"教学文档"
		}
	]
}
```

### <a name="t11">11.查询所有词汇表类型</a>

#### 11.1.请求参数
* `condition`:1为名称,2为编码,非必须
* `name`:用户输入值资源名,非必须（模糊查询还有name的资源）
* `sort`:排序的字段名,非必须
* `order`:排序的顺序(desc,asc),非必须
* `page`:分页的页数,必须（具体返回哪一页）
* `rows`:每页的记录数,必须

#### 11.2.返回json格式

```json
{
  "total": 28,
  "rows": [
    {
      "id": "FI-SW-01",
      "zh_name": "学习资源类型",
      "en_name": "Learning Resource Type",
      "lom_id": "5.2",
      "source": "教育资源建设技术规范",
      "words": [
        "媒体类型",
        "试题",
        "试卷",
        "课件",
        "文献资料",
        "教学案例",
        "常见问题解答",
        "资源目录索引",
        "网络课程"
      ]
    },
	...
...]
}
```
### <a name="t12">12.修改词汇表类型</a>

#### 12.1.请求参数
* `id`:词汇表ID，必须
* `zh_name`:中文名称,如果没有传的话,表示保持原有值,非必须
* `en_name`:英文名称,如果没有传的话,表示保持原有值,非必须
* `lom_id`:lom编号,如果没有传的话,表示保持原有值,非必须
* `source`:来源,如果没有传的话,表示保持原有值,非必须
* `words`:词汇表,如果没有传的话,表示保持原有值,非必须

#### 12.2.返回json格式

```json
 {  
	success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```

### <a name="t13">13.删除词汇表类型</a>

#### 13.1.请求参数
* `id`:词汇表类型ID

#### 13.2.返回json格式

```json
 {  
	success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```

### <a name="tt4">编码表</a>
### <a name="t14">14.创建编码表</a>
#### 14.1 请求参数
* name:编码名称
* code:编码
* parent_id:父节点

#### 14.2 返回json格式
```json
 {  
	success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```

### <a name="t15">15.查询编码表</a>
#### 15.1 请求参数  
* id:编码ID  

#### 15.2 返回json格式

```json
{
  "total": 28,
  "rows": [
    {
      "id": "FI-SW-01",
      "name": "通用",
      "code": "G",
      "children":[
        {
          "id": "FI-SW-011",
          "name": "适用对象",
          "code": "O",
          "children":[
            {
              "id": "FI-SW-011-1",
              "name": "0~2岁",
              "code": "GO001"
            },
            {
              "id": "FI-SW-011-2",
              "name": "2~6岁",
              "code": "GO002"
            },
			...
            ]
        },
		{
          "id": "FI-SW-012",
          "name": "基础学科",
          "code": "S",
          "children":[
            {
              "id": "FI-SW-012-1",
              "name": "语文",
              "code": "GS001"
            },
            {
              "id": "FI-SW-012-2",
              "name": "数学",
              "code": "GS002"
            },
			...
          ]
        },
		{
          "id": "FI-SW-013",
          "name": "高等学科",
          "code": "GD",
          "children":[
            {
              "id": "FI-SW-013-1",
              "name": "哲学类",
              "code": "0101"
            },
            {
              "id": "FI-SW-013-2",
              "name": "经济学类",
              "code": "0201"
            },
			...
          ]
		...
        },
		...
	]
```
### <a name="t16">16.编辑编码表</a>
#### 16.1 请求参数
* id:编码ID
* name:编码表名称,如果没有传的话,表示保持原有值,非必须
* code:编码,如果没有传的话,表示保持原有值,非必须
* parent_id:父节点,如果没有传的话,表示保持原有值,非必须

#### 16.2 返回json格式
```json
 {  
	success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```
### <a name="t17">17.删除编码表</a>
#### 17.1 请求参数
* id:编码ID

#### 17.2 返回json格式
```json
 {  
	success:true,
    id:只有当success为true时返回,
    msg:"如果为success为false时返回错误信息"
 }
```